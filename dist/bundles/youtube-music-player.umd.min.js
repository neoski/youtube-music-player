!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs/BehaviorSubject")):"function"==typeof define&&define.amd?define("youtube-music-player",["exports","@angular/core","rxjs/BehaviorSubject"],t):t(e["youtube-music-player"]={},e.ng.core,e.Rx)}(this,function(e,t,i){"use strict";var n=function(){function e(){this.playlistSub=new i.BehaviorSubject([]),this.indexSub=new i.BehaviorSubject(0),this.errorSub=new i.BehaviorSubject(0),this.playSub=new i.BehaviorSubject(!1),this.pauseSub=new i.BehaviorSubject(!1)}return e.prototype.getErrorSub=function(){return this.errorSub},e.prototype.setError=function(e){this.errorSub.next(e)},e.prototype.setPlaylist=function(e){this.playlistSub.next(e)},e.prototype.getPlaylistSub=function(){return this.playlistSub},e.prototype.setIndex=function(e){this.indexSub.next(e)},e.prototype.getIndexSub=function(){return this.indexSub},e.prototype.getPlaySub=function(){return this.playSub},e.prototype.getPauseSub=function(){return this.pauseSub},e.prototype.play=function(){this.playSub.next(!0)},e.prototype.pause=function(){this.pauseSub.next(!0)},e.prototype.urlsToIds=function(n){return n.map(function(e,t){var i=/\?v=([^\/|\?|\=]+)/.exec(e);i&&(n[t]=i[1])}),n},e}();n.decorators=[{type:t.Injectable}],n.ctorParameters=function(){return[]};var o=function(){function e(e){this.ympService=e,this.durationInterval=null,this.playlist=[],this.autoplay=0,this.index=0}return e.prototype.ngOnInit=function(){var i=this;window.onYouTubeIframeAPIReady=function(){i.player=new YT.Player("youtubeVideo",{height:"0",width:"0",playerVars:{autoplay:1,controls:0,autohide:0,wmode:"opaque"},events:{onReady:function(){i.player.setVolume(50),0!==i.index&&i.ympService.setIndex(i.index),i.ympService.getIndexSub().subscribe(function(e){i.index=e,5!==i.player.getPlayerState()&&i.startNewVideo()}),i.playlist!==[]&&i.ympService.setPlaylist(i.playlist),i.ympService.getPlaylistSub().subscribe(function(e){i.playlist=e,i.autoplay?i.startNewVideo():i.showButtonsAfterLoad(!0)}),i.ympService.getPlaySub().subscribe(function(e){e&&i.playVideo()}),i.ympService.getPauseSub().subscribe(function(e){e&&i.pauseVideo()})},onStateChange:function(e){if(0===e.data&&i.nextSong(),1===e.data){var t=i.player.getVideoData();i.ympTitle.nativeElement.innerHTML=30<t.title.length?t.title.substr(0,27)+"...":t.title,i.showButtonsAfterLoad()}2===e.data&&i.showButtonsAfterLoad(!0)},onError:function(e){i.ympLoading.nativeElement.className="hidden",i.ympError.nativeElement.className="",i.ympError.nativeElement.innerHTML="Error at loading video (index "+i.index+")",i.ympService.setError(e.data)}}})}},e.prototype.ngOnDestroy=function(){this.durationInterval&&clearInterval(this.durationInterval)},e.prototype.setVolume=function(){this.player.setVolume(this.soundBar.nativeElement.value)},e.prototype.nextSong=function(){this.index=this.index>=this.playlist.length-1?0:this.index+1,this.ympTitle.nativeElement.innerHTML="",this.hideButtonsForLoad(),this.player.loadVideoById(this.playlist[this.index])},e.prototype.previousSong=function(){this.index=this.index<=0?this.playlist.length-1:this.index-1,this.ympTitle.nativeElement.innerHTML="",this.hideButtonsForLoad(),this.player.loadVideoById(this.playlist[this.index])},e.prototype.updateTime=function(e,t){var i=Math.floor(e/60),n=Math.floor(e%60),o=Math.floor(t/60),a=Math.floor(t%60);this.ympTime.nativeElement.innerHTML=(i<10?"0"+i:i)+":"+(n<10?"0"+n:n)+"|"+(o<10?"0"+o:o)+":"+(a<10?"0"+a:a)},e.prototype.updateBar=function(){var e=this.player.getCurrentTime();this.duration=this.player.getDuration();var t=this.player.getVideoLoadedFraction();this.updateTime(e,this.duration),this.ympProgress.nativeElement.style.left=100*e/this.duration+"%",this.ympBuffered.nativeElement.style.width=100*t+"%"},e.prototype.changePosition=function(e){var t=100*e.offsetX/this.ympBar.nativeElement.offsetWidth;this.player.seekTo(t*this.duration/100,!0),this.updateBar()},e.prototype.startNewVideo=function(){this.ympError.nativeElement.className="hidden",this.hideButtonsForLoad(),this.player.loadVideoById(this.playlist[this.index])},e.prototype.playVideo=function(){2===this.player.getPlayerState()?this.player.playVideo():this.startNewVideo()},e.prototype.pauseVideo=function(){this.player.pauseVideo()},e.prototype.hideButtonsForLoad=function(){this.buttonPlay.nativeElement.className="hidden",this.buttonPause.nativeElement.className="hidden",this.ympPrevious.nativeElement.className="hidden",this.ympNext.nativeElement.className="hidden",this.ympLoading.nativeElement.className="",this.durationInterval&&(clearInterval(this.durationInterval),this.durationInterval=!1)},e.prototype.showButtonsAfterLoad=function(e){var t=this;void 0===e&&(e=!1),e?(this.buttonPause.nativeElement.className="hidden",this.buttonPlay.nativeElement.className=""):(this.buttonPause.nativeElement.className="",this.buttonPlay.nativeElement.className="hidden",this.durationInterval||(this.durationInterval=setInterval(function(){return t.updateBar()},100))),this.ympLoading.nativeElement.className="hidden",this.ympPrevious.nativeElement.className="",this.ympNext.nativeElement.className=""},e}();o.decorators=[{type:t.Component,args:[{selector:"app-youtube-music-player",template:'<div id="ymp" #ymp>\n  <div id="ympLeftPart">\n    <div id="ympPrevious" class="hidden" #ympPrevious (click)="previousSong()">↩</div>\n    <div id="ympLoading" #ympLoading>\n      ...\n    </div>\n    <div id="ympPlay">\n      <div id="buttonPause" class="hidden" (click)="pauseVideo()" #buttonPause>◼</div>\n      <div id="buttonPlay" class="hidden" (click)="playVideo()" #buttonPlay>▶</div>\n    </div>\n    <div id="ympNext" class="hidden" #ympNext (click)="nextSong()">↪</div>\n    <div id="ympTitle" #ympTitle></div>\n    <div id="ympError" class="hidden" #ympError></div>\n  </div>\n  <div id="ympBar" #ympBar (click)="changePosition($event)">\n      <div id="ympProgress" #ympProgress></div>\n      <div id="ympBuffered" #ympBuffered></div>\n  </div>\n  <div id="ympRightPart">\n      <div id="ympTime" #ympTime>00:00|00:00</div>\n      <input type="range" id="soundBar" #soundBar (change)=setVolume()/>\n      <div class="hidden" id="youtubeVideo"></div>\n  </div>\n</div>',styles:['div#ymp .hidden{visibility:hidden;display:none!important}div#ymp{font-family:"Trebuchet MS",Helvetica,sans-serif;width:100%;height:17px;background-color:#000;color:#fff;line-height:14px;font-size:10px;padding-bottom:4px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}div#ymp div#ympNext,div#ymp div#ympPrevious{position:relative;top:2px;font-size:12px;cursor:pointer;font-weight:700;padding-left:4px}div#ympLeftPart{padding-top:3px;padding-left:2px;display:-webkit-box;display:-ms-flexbox;display:flex}div#ympRightPart{padding-left:10px;padding-right:10px;float:right;display:-webkit-box;display:-ms-flexbox;display:flex}div#ymp #ympPlay div{font-size:10px;position:relative;top:0;cursor:pointer;padding-top:1px}div#ymp #ympPlay{margin-left:5px;display:inline-block;width:9px}div#ymp #ympLoading{position:relative;top:2px;left:14px}div#ymp #ympLoading img{height:15px;width:15px}div#ymp div#ympError,div#ymp div#ympTitle{margin-left:5px;margin-right:5px;margin-top:1px;display:inline-block;white-space:nowrap}div#ympBar{position:relative;width:100%;border:1px solid #fff;height:5px;background-color:#333;overflow:hidden;margin-top:6.5px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}div#ymp div.ympBuffered{z-index:1;position:absolute;background-color:#666;width:0%;height:5px}div#ymp #ympProgress{z-index:2;position:absolute;width:2px;height:4px;border:1px solid #fff;background-color:#fff}div#ymp #soundBar{z-index:1;position:relative;display:inline-block;width:100px;background-color:#000;overflow:hidden;top:2px;margin-left:5px}div#ymp #soundValue{z-index:2;left:50%;position:absolute;width:3px;height:4px;border:1px solid #fff;border-radius:50%;background-color:#fff}div#ymp div#ympTime{padding-top:4px;padding-right:4px}']}]}],o.ctorParameters=function(){return[{type:n}]},o.propDecorators={ymp:[{type:t.ViewChild,args:["ymp"]}],buttonPlay:[{type:t.ViewChild,args:["buttonPlay"]}],buttonPause:[{type:t.ViewChild,args:["buttonPause"]}],ympBar:[{type:t.ViewChild,args:["ympBar"]}],soundBar:[{type:t.ViewChild,args:["soundBar"]}],ympProgress:[{type:t.ViewChild,args:["ympProgress"]}],ympBuffered:[{type:t.ViewChild,args:["ympBuffered"]}],ympTime:[{type:t.ViewChild,args:["ympTime"]}],ympPrevious:[{type:t.ViewChild,args:["ympPrevious"]}],ympNext:[{type:t.ViewChild,args:["ympNext"]}],ympLoading:[{type:t.ViewChild,args:["ympLoading"]}],ympTitle:[{type:t.ViewChild,args:["ympTitle"]}],ympError:[{type:t.ViewChild,args:["ympError"]}],playlist:[{type:t.Input}],autoplay:[{type:t.Input}],index:[{type:t.Input}]};var a=function(){};a.decorators=[{type:t.NgModule,args:[{declarations:[o],exports:[o],providers:[n]}]}],e.YoutubeMusicPlayerModule=a,e.YoutubeMusicPlayerService=n,e.ɵa=o,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=youtube-music-player.umd.min.js.map
